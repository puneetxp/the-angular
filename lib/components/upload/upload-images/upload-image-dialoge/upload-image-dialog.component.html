<form (ngSubmit)="upload($event)" action="/api/isuper/photo" method="PUT">
  <h2 mat-dialog-title class="text-center">Upload Images</h2>
  <mat-dialog-content class="mat-typography">
    <mat-form-field class="w-full" [ngClass]="diredit ? '': 'hidden'">
      <mat-label>Directory</mat-label>
      <input class="w-full" name="dir" matInput [(ngModel)]="DialogPhotoUpload!.directory" />
    </mat-form-field>
    @if (DialogPhotoUpload!.directory.length >0) {
      <div class="m-2 relative" fileDragDrop
        (filesChangeEmiter)="dragevent($event)">
        <div class="absolute w-full h-full flex justify-center content-center gap-2 align-middle flex-col"
          [ngClass]="progress == 0 ? 'hidden' :'z-20'">
          <h2 class="text-center">Progess</h2>
          <div class="mx-auto">
            <mat-progress-spinner class="example-margin" [color]="'primary'" [mode]="'determinate'" [value]="progress">
            </mat-progress-spinner>
          </div>
        </div>
        <div [ngClass]="progress == 0 ? '' :'blur-lg'">
          <div class="flex p-2 justify-center content-center min-h-56">
            <div class="m-auto">
              <input hidden type="file" accept="image/*" id="file" (change)="inputevent($event)" multiple />
              <button type="button" mat-raised-button color="primary"
                onclick="document.querySelector('input#file').click()">
                <mat-icon>
                  publish
                </mat-icon>
                Select Files
              </button>
            </div>
          </div>
          <div [ngClass]="Array.from(photos.files).length>0 ?'mt-3':'hidden'">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
              @for (photo of Array.from(photos.files); track photo; let i = $index) {
                <div class="relative">
                  <img class="max-h-full max-w-full" [src]="ImageService.imgtourl(photo)" />
                  <div class="opacity-0 hover:opacity-100 absolute bottom-0 w-full h-full gird">
                    <div class="flex justify-center content-end h-full items-end">
                      <button type="button" mat-raised-button color="warn" (click)="removeimage(i)"><mat-icon
                      class="m-auto">delete</mat-icon></button>
                    </div>
                  </div>
                </div>
              }
            </div>
          </div>
        </div>
      </div>
    }
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Cancel</button>
    <button mat-raised-button cdkFocusInitial color="primary" [disabled]="Array.from(photos.files).length===0" type="submit">Procced</button>
  </mat-dialog-actions>
</form>